var RichmediaYT=function(){function a(b,c,d,e,f){a.scope=this,this.containerRichmediaYT=b,this.imgPath=c,this.frameData=d,this.timelineData=e,this.configPlayer=f,this.dataRichmediaYT,this.initialLoad=!0,this.containerVideo,this.containerYT,this.poster,this.arrayBtn=[],this.player,this.firstVideoRunning=!0,this.counterImg=0,this.totalImg=0,this.arrayFrames=[],this.arrayElements=[],this.clicktag,this.iteration=0,this.numTween=0,this.lastLabelName,this.configureRichmediaYT(),this.addListeners()}return a.prototype.configureRichmediaYT=function(){if(this.dataRichmediaYT={width:this.containerRichmediaYT.getAttribute("data-w"),height:this.containerRichmediaYT.getAttribute("data-h"),bgColor:this.containerRichmediaYT.getAttribute("data-bg-color"),border:this.containerRichmediaYT.getAttribute("data-border"),preload:this.containerRichmediaYT.getAttribute("data-preload"),cover:this.containerRichmediaYT.getAttribute("data-cover")},this.containerRichmediaYT.style.width=this.dataRichmediaYT.width+"px",this.containerRichmediaYT.style.height=this.dataRichmediaYT.height+"px",this.containerRichmediaYT.style.backgroundColor=this.dataRichmediaYT.bgColor,this.containerRichmediaYT.style.border=this.dataRichmediaYT.border,"true"==this.dataRichmediaYT.cover){var b=document.createElement("div");b.style.backgroundColor=this.dataRichmediaYT.bgColor,b.style.zIndex=2,b.setAttribute("id","cover"),this.containerRichmediaYT.appendChild(b)}this.containerVideo=document.createElement("div"),this.containerVideo.setAttribute("id",this.configPlayer.playerObj.containerParentId),this.containerVideo.style.position="relative",0===this.configPlayer.playerObj.containerParentAutoAlpha&&(this.containerVideo.style.opacity=0,this.containerVideo.style.visibility="hidden"),this.containerVideo.style.zIndex=4,this.containerRichmediaYT.appendChild(this.containerVideo),this.containerYT=document.createElement("div"),this.containerYT.setAttribute("id","youtube-container"),this.containerYT.style.position="absolute",this.containerYT.style.left=this.configPlayer.playerObj.pos.x+"px",this.containerYT.style.top=this.configPlayer.playerObj.pos.y+"px",this.containerVideo.appendChild(this.containerYT),this.poster=new Image,this.poster.src=this.imgPath+"poster.png",this.poster.style.left=this.configPlayer.playerObj.pos.x+"px",this.poster.style.top=this.configPlayer.playerObj.pos.y+"px",this.poster.style.cursor="pointer",this.poster.style.zIndex=2,this.poster.setAttribute("id","poster"),this.poster.setAttribute("data","video1"),this.containerVideo.appendChild(this.poster);var c=0;if(this.configPlayer.playerObj.arrayIdVideos.forEach(function(a){c++}),void 0!=this.configPlayer.playerObj.arrayBtnSrc)for(var d=0;d<c;d++){var e=new Image,f=this.configPlayer.playerObj.arrayBtnSrc[d].indexOf("."),g=this.configPlayer.playerObj.arrayBtnSrc[d].substr(0,f);e.src=this.imgPath+this.configPlayer.playerObj.arrayBtnSrc[d],e.style.left=this.configPlayer.playerObj.arrayBtnPosX[d]+"px",e.style.top=this.configPlayer.playerObj.arrayBtnPosY[d]+"px",e.style.cursor="pointer",e.setAttribute("id",g),e.setAttribute("data","video"+(d+1)),a.scope.arrayBtn.push(e),a.scope.containerVideo.appendChild(e)}var h=0,i=[];for(var j in this.frameData)this.arrayElements.push(this.frameData[j]),i.push(j.toString()),h++;for(var k=0;k<h;k++)this.totalImg+=this.arrayElements[k].length;for(var l=0;l<h;l++){var m=document.createElement("div");m.classList.add("frame"),m.setAttribute("id",i[l]),this.containerRichmediaYT.appendChild(m),this.arrayFrames.push(m),this.setImgs(this.arrayFrames[l],this.arrayElements[l])}this.setClickTag()},a.prototype.setImgs=function(b,c){c.forEach(function(c){var d=new Image;d.src=a.scope.imgPath+c,b.appendChild(d);var e=c.indexOf("."),f=c.substr(0,e);d.setAttribute("id",f),d.onload=a.scope.imgLoaded()})},a.prototype.imgLoaded=function(){a.scope.counterImg++,a.scope.counterImg==a.scope.totalImg&&a.scope.createTimeLine()},a.prototype.addListeners=function(){this.clicktag.addEventListener("click",a.scope.goClickTag),this.poster.addEventListener("click",a.scope.onClickBtn);for(var b=0;b<this.arrayBtn.length;b++)this.arrayBtn[b].addEventListener("mouseenter",a.scope.overBtn),this.arrayBtn[b].addEventListener("mouseleave",a.scope.outBtn),this.arrayBtn[b].addEventListener("click",a.scope.onClickBtn)},a.prototype.overBtn=function(a){TweenMax.to(a.currentTarget,.5,{scale:.9,ease:Back.easeInOut})},a.prototype.outBtn=function(a){TweenMax.to(a.currentTarget,.5,{scale:1,ease:Back.easeInOut})},a.prototype.setClickTag=function(){this.clicktag=document.createElement("div"),this.clicktag.setAttribute("id","clicktag"),this.clicktag.style.position="absolute",this.clicktag.style.width=this.containerRichmediaYT.style.width,this.clicktag.style.height=this.containerRichmediaYT.style.height,this.clicktag.style.opacity=0,this.clicktag.style.cursor="pointer",this.clicktag.style.zIndex=3,this.containerRichmediaYT.appendChild(this.clicktag)},a.prototype.goClickTag=function(){a.scope.firstVideoRunning||a.scope.player.stopVideo(),a.scope.configPlayer.playerObj.clicktagFunction()},a.prototype.onClickBtn=function(b){var c=b.currentTarget.getAttribute("id"),d=a.scope.arrayBtn.indexOf(b.currentTarget);return 1==a.scope.initialLoad?(a.scope.firstVideoRunning=!1,a.scope.initialLoad=!1,"poster"==c?a.scope.configPlayer.setIdVideo=a.scope.configPlayer.playerObj.arrayIdVideos[0]:a.scope.configPlayer.setIdVideo=a.scope.configPlayer.playerObj.arrayIdVideos[d],TweenMax.to(a.scope.poster,.5,{autoAlpha:0}),a.scope.player=new youTubeAdFeature(a.scope.configPlayer),void console.log("ver video")):void a.scope.showVideo(c)},a.prototype.showVideo=function(b){var d,c=b;"poster"===c?a.scope.changePlayer(a.scope.configPlayer.playerObj.arrayIdVideos[0]):(d=a.scope.arrayBtn.indexOf(document.getElementById(c)),a.scope.changePlayer(a.scope.configPlayer.playerObj.arrayIdVideos[d])),console.log("ver siguiente video")},a.prototype.changePlayer=function(b){a.scope.player.changeVideo(b)},a.prototype.stopVideo=function(){a.scope.player.stopVideo()},a.prototype.createTimeLine=function(){a.scope.tl=new TimelineMax,a.scope.tl.paused(!0),a.scope.timelineData.arrayTween.forEach(function(b){switch(a.scope.numTween++,a.scope.tl.addLabel("step_"+a.scope.numTween),b.type){case"set":a.scope.tl.add(TweenMax.set(b.id,b.prop),b.delay);break;case"to":a.scope.tl.add(TweenMax.to(b.id,b.time,b.prop),b.delay);break;case"from":a.scope.tl.add(TweenMax.from(b.id,b.time,b.prop),b.delay);break;case"fromTo":a.scope.tl.add(TweenMax.fromTo(b.id,b.time,b.propInit,b.propEnd),b.delay)}}),a.scope.tl.addCallback(function(){a.scope.endTimeLine(a.scope.timelineData.loopIteration,a.scope.timelineData.loopLabelInit)}),void 0==a.scope.timelineData.initLabel||0==a.scope.timelineData.initLabel?a.scope.tl.resume(0):a.scope.tl.resume(a.scope.timelineData.initLabel),void 0!=a.scope.timelineData.addPauseAt&&a.scope.addPauseAt(a.scope.timelineData.addPauseAt)},a.prototype.endTimeLine=function(b,c){if(1!=b){if(b==-1||void 0==b)a.scope.tl.resume(0);else{if(a.scope.iteration++,b>1&&a.scope.iteration==b-1){var d;void 0==a.scope.timelineData.loopLabelEnd||0==a.scope.timelineData.loopLabelEnd?(d=a.scope.tl.getLabelsArray()[a.scope.tl.getLabelsArray().length-1],a.scope.lastLabelName=d.name):(d=a.scope.timelineData.loopLabelEnd,a.scope.lastLabelName=d),a.scope.tl.addPause(a.scope.lastLabelName)}if(a.scope.iteration==b)return}void 0!=c||0==c?a.scope.tl.resume(c):a.scope.tl.resume(0)}},a.prototype.addPauseAt=function(b){a.scope.tl.addPause(b)},a}();